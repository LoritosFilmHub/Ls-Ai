<!-- Firebase SDK (vers칚o modular) -->
<script type="module">
  // Importando do CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { 
    getAuth, 
    signInWithEmailAndPassword, 
    createUserWithEmailAndPassword, 
    onAuthStateChanged, 
    signOut 
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  // Configura칞칚o Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDKPoHfjTHnfwrZmqewtM6lTsDAA9tGIO4",
    authDomain: "ls-ai-studio-ee7b5.firebaseapp.com",
    projectId: "ls-ai-studio-ee7b5",
    storageBucket: "ls-ai-studio-ee7b5.firebasestorage.app",
    messagingSenderId: "900119249794",
    appId: "1:900119249794:web:b45ce25dce982e2bacc59b"
  };

  // Inicializa Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  let isLogin = true;

  // Envio do formul치rio
  document.getElementById("authForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    try {
      if (isLogin) {
        await signInWithEmailAndPassword(auth, email, password);
      } else {
        await createUserWithEmailAndPassword(auth, email, password);
      }
    } catch (err) {
      alert("丘멆잺 Erro: " + err.message.replace("Firebase:", "").trim());
    }
  });

  // Alternar entre login e registro
  document.getElementById("toggleLink").addEventListener("click", (e) => {
    e.preventDefault();
    isLogin = !isLogin;
    document.getElementById("formTitle").innerText = isLogin ? "Entrar" : "Registrar";
    document.getElementById("submitBtn").innerText = isLogin ? "Entrar" : "Registrar";
    document.getElementById("toggleText").innerText = isLogin ? "Ainda n칚o tem conta?" : "J치 tem conta?";
    document.getElementById("toggleLink").innerText = isLogin ? "Registrar" : "Entrar";
  });

  // Monitorar login
  onAuthStateChanged(auth, (user) => {
    if (user) {
      console.log("Usu치rio logado:", user.email);
      document.getElementById("logoutBtn").style.display = "block";
      // 游댕 Redirecionar ap칩s login
      window.location.href = "https://SEU_USUARIO.github.io/Ls-Ai-Studio/"; 
    } else {
      console.log("Usu치rio deslogado");
      document.getElementById("logoutBtn").style.display = "none";
    }
  });

  // Logout
  document.getElementById("logoutBtn").addEventListener("click", async () => {
    await signOut(auth);
    window.location.href = "index.html"; // volta para a tela de login
  });
</script>
